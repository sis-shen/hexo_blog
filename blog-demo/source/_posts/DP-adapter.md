---
title: 设计模式的C++实现(6)——适配器Adapter/包装器-Wrapper
date: 2024-12-02 21:42:23
tags:
---

> **模式名称**: 适配器-Adapter,又称包装器-Wrapper
> **类型**: 结构型
> **问题-使用场景**: 适配器可以让原本由于**接口不兼容**而不能一起工作的类可以重新一起工作
> **解决方案**：使用适配器对象对原本的类进行`继承`或者对类的对象进行`组合`并调用接口两种方式
> **效果**：在无需知晓，且不改变已有类的源码的前提下,使系统能够耦合在一起进行工作

# 实现方式
`Adapter`主要有两种实现方式。

1. 继承
2. 组合

两种方式各有利弊，虽然可能组合方式居多

![](https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/202412030918949.webp)

# 应用举例
现在我们要做一个`绘图编辑器`，我们用`Shape`抽象类规定了子类控件的行为，而我们又有了一个成品的工具类`TextView`，它本身提供了`显示文本的接口`,但我们**不知道它的源码，或者不愿意修改它的源码**，因此我们无法让`TextView`满足`Shape`的规定接口要求，二者无法直接一起工作。

所以为了复用`TextView`，我们可以选择使用`适配器模式`，构造一个`TextShape`子类继承自`Shape`，同时组合了一个`TextView`实例化出的对象`text`，这样也可以调用`TextView`里的接口。这样通过`TextShape`作为适配器，我们成功地让接口能够间接兼容了。

> *下图为例子的类图，其中Line类只是体现继承关系，与适配器模式无关*
![](https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/202412030842396.webp)

# 适用范围
+ 想使用一个已存在的类，而它的接口不符合要求
+ 想创建一个可复用的类，该类可以与其它不相关的类或不可见的类协同工作
+ 在继承关系中，对针对父类接口进行适配器适配，用以减少对每个子类进行适配的冗余操作

# 两种实现方式的结构

+ 多继承实现

![](https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/202412031003984.webp)

+ 组合实现

![](https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/202412031015008.webp)

# 参与者
+ `Target`
  + 提供与`Client`交互的接口
+ `Client`
  + 系统的交付对象
+ `Adaptee`
  + 定义一个已经存在的接口，且这个接口**待适配**
+ `Adapter`
  + 将`Adaptee`的接口与`Target`的接口进行适配