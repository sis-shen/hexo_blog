---
title: =C语言= 整型变量与过大的整数
date: 2023-10-14 07:09:14
tags:
---
## 整型家族 #
在使用C语言写程序时，会储存各种长度的整型,而在整型家族中，长度的比较如下

`char < short <= int <= long <long long `

## 整型是如何储存在内存中的 #
*以`char`为例*
![char](https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-10-14_15-33-30.jpg)

`char`的长度为1个`字节`，8个`比特位`,其中**最高位**是**符号位**,`0`表示正数，`1`表示负数，剩下的位数用于储存变量的**绝对值**

---
而当使用无符号整型(带前缀`unsigned`)时，只需把符号位也用于存值即可

## 能够储存的最大正整数 #

`int`长度为4`字节`,能够储存的最大值为`2的31次方-1`,即**2,147,483,647**

`unsigned int`能够储存的最大值为**4294967295**

`unsigned long long`长度为8`字节`,能够储存的最大值为`2的64次方-1`,即**18,446,744,073,709,551,615**

---

## 限制 #

虽然`unsigned long long`已经很大了，但当遇到`指数`,`阶乘`之类的运算时仍然可能**存不下!**(光`21!`就比`unsigned long long`长了)

## 思路 #
过大的整数，可能出现在**程序的过程**中，也可能出现在**输出**中，对于过程，可以尝试**改变实现思路**，让过程中不出现过大的整数；对于输出，可以尝试**改变输出的类型**，采用输出**字符或字符串**

# 以下皆为例题 #

## 1.求n!的结尾有多少个0

最直白的思路就是把`n!`算出来，然后用`%10`再`/=10`的方法统计末尾的`0`,想法很简单，“实现”起来也不难，**但不幸的是**，`21!`就已经储存不了了，所以不能暴力求解

所以要**改变思路**，先从末尾0是怎么来的下手。末尾的n个0来自因式分解后10的n次方，而采用质因数分解的方法，可以发现`0`来自分解后`2的n次方`和`5的n次方`,而一个数分解后`2的n次方`必定比`5的n次方` 多，所以只需统计`5的n次方`。**注意**：就别再倒回去，想着先算出阶乘再求`5的n次方`了。

**这里采用逐步计数的方法**：结果中的`5的n次方`来自各个因数中`5的N次方`的累乘,所以只需要历遍每个因数，并统计其中`因数5`的次数。这样过程中就不会有过大的数字了

```C
//代码实现
int count_num0(int n)
{
    int count = 0;
    for(int i = 1;i<=n;i++)
    {
        int copy = i//防止改变循环变量
        while(copy%5 == 0)//统计因数5的出现次数
        {
            if(copy%5 == 0)
            {
                count++;
            }
            copy/=5;
        }
    }

    return count;
}

```

## 快速输出1+2+……+10^n #
*如下图*：当我们试图算一算答案时，发现`n`到了`10`时就已经算不出答案了

![计算结果](https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/gao_si.png)

所以要**改变输出答案答案的方式**,观察一下`n`在`1~9`时的输出

![输出](https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-10-19_07-26-54.jpg)

这时我们发现**答案颇有规律**：每个输出都是**两段**`先一个5，然后n-1个0`！

这样我们只需**从最高位往最低位**逐位打印即可,代码如下

```C
void printChar(int n)//版本一，逐位打印字符(串)
{
    printf("5");
    for(int i =0;i<n-1;i++)
    {
        printf("0");
    }
    //再重复一段
    printf("5");
    for(int i =0;i<n-1;i++)
    {
        printf("0");
    }
    printf("\n");
}

void printNum(int n)//版本二，逐位打印整型
{
    printf("%d",5);
    for(int i =0;i<n-1;i++)
    {
        printf("%d",0);
    }
    //再重复一段
    printf("%d",5);
    for(int i =0;i<n-1;i++)
    {
        printf("%d",0);
    }
    printf("\n");
}
```